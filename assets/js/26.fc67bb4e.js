(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{392:function(a,t,s){a.exports=s.p+"assets/img/observer.51495ee3.png"},477:function(a,t,s){"use strict";s.r(t);var e=s(42),o=Object(e.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"observer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#observer"}},[a._v("#")]),a._v(" Observer")]),a._v(" "),e("h2",{attrs:{id:"historico-de-versao"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#historico-de-versao"}},[a._v("#")]),a._v(" Histórico de Versão")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("Data")]),a._v(" "),e("th",[a._v("Autor(es)")]),a._v(" "),e("th",[a._v("Descrição")]),a._v(" "),e("th",[a._v("Versão")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[a._v("26/10/2020")]),a._v(" "),e("td",[a._v("\n        Fábio Teixeira("),e("a",{attrs:{target:"blank",href:"https://github.com/fabio1079"}},[a._v("fabio1079")]),a._v(")\n      ")]),a._v(" "),e("td",[a._v("Adicionando utilização do observer no projeto")]),a._v(" "),e("td",[a._v("0.1")])]),a._v(" "),e("tr",[e("td",[a._v("26/10/2020")]),a._v(" "),e("td",[a._v("\n        Lucas Midlhey("),e("a",{attrs:{target:"blank",href:"https://github.com/lucasmidlhey"}},[a._v("lucasmidlhey")]),a._v(")\n      ")]),a._v(" "),e("td",[a._v("Adicionando referencia e aplicabilidade")]),a._v(" "),e("td",[a._v("0.2")])]),a._v(" "),e("tr",[e("td",[a._v("26/10/2020")]),a._v(" "),e("td",[a._v("\n        Cauê("),e("a",{attrs:{target:"blank",href:"https://github.com/caue96"}},[a._v("caue96")]),a._v(")\n      ")]),a._v(" "),e("td",[a._v("Incrementando a introdução do que é o padrão observer")]),a._v(" "),e("td",[a._v("0.3")])])])]),a._v(" "),e("h2",{attrs:{id:"introducao"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introducao"}},[a._v("#")]),a._v(" Introdução")]),a._v(" "),e("p",{attrs:{align:"justify"}},[a._v(" \nO Observer é um padrão de projeto comportamental que permite definir um mecanismo de assinatura para notificar múltiplos objetos sobre quaisquer eventos que aconteçam com o objeto que eles estão observando.\n")]),a._v(" "),e("p",{attrs:{align:"justify"}},[a._v(" \nO padrão Observer sugere que seja adicionado um mecanismo de assinatura para a classe que notifica outros objetos sobre as mudanças em seu estado, para que objetos individuais possam assinar ou desassinar uma corrente de eventos vindo dessa classe. Esse mecanismo consiste em 2 estapas: 1 - Um vetor para armazenar uma lista de referências aos objetos que querem saber das mudanças do estado da classe notificadora; 2 - Alguns métodos públicos que permitem adicionar os objetos que querem saber das mudanças do estado da classe notificadora e removê-los da lista.\n")]),a._v(" "),e("h2",{attrs:{id:"estrutura"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#estrutura"}},[a._v("#")]),a._v(" Estrutura")]),a._v(" "),e("p",[e("img",{attrs:{src:s(392),alt:"Estrutura observer"}})]),a._v(" "),e("h2",{attrs:{id:"aplicacoes-no-projeto-qrodizio"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aplicacoes-no-projeto-qrodizio"}},[a._v("#")]),a._v(" Aplicações no Projeto(QRodízio)")]),a._v(" "),e("h3",{attrs:{id:"disclaimer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#disclaimer"}},[a._v("#")]),a._v(" Disclaimer")]),a._v(" "),e("p",[a._v("Primeiramente é bom deixar claro que nosso projeto está utilizando de linguagens multi-paradigmas(python e javascript) sendo assim, adaptações aos padrões são necessárias para não fugir do estilo do código utilizado.")]),a._v(" "),e("p",[a._v('A Linguem python possui em seu "zen of python" a seguinte declaração: "Simple is better than complex". Seguindo essa filosifia, decidimos que, se algo pode ser feito em uma função, então será feito em uma função. Assim mantendo um código mais limpo, simples e fácil de manter.')]),a._v(" "),e("h3",{attrs:{id:"utilizacao"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#utilizacao"}},[a._v("#")]),a._v(" Utilização")]),a._v(" "),e("p",[a._v("Tinhamos originalmente planejado construir todo um sistema de notificações utilizano a\nimplementação padrão de um observer(jaka like e etc). Porém como nossa arquitetura é MVC\ncom a view separada em uma outra aplicação com uma base de código completamente diferente e em outra linguagem. Acabamos por utilizar do socketio para o nosso sistema de notificações.")]),a._v(" "),e("p",[a._v("No socketio, uma conexão é aberta entre o frontend e o backend, em que, eventos são emitidos por ambos os lados e estes podem escutar por esses eventos. O que faz do socketio\numa adaptação do padrão observer que funciona de forma distribuída.")]),a._v(" "),e("h4",{attrs:{id:"exemplo-de-codigo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exemplo-de-codigo"}},[a._v("#")]),a._v(" exemplo de código")]),a._v(" "),e("p",[a._v("Quando um cliente pede por atendimento:")]),a._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("callForAssistance")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" url "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$socket"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("emit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"call_for_assistance"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n")])])]),e("p",[a._v('A chamada "call_for_assistance" é identificada pelo socketio do backend')]),a._v(" "),e("div",{staticClass:"language-python extra-class"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[a._v("@socketio"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"call_for_assistance"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("def")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("call_for_assistance")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    query "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" TableSession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("filter_by"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("url"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("first"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" query "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("None")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# nofity table")]),a._v("\n        emit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"frontend_employee_called"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Table session not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" json"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v("\n\n    emit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"frontend_employee_called"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Employee called"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" json"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# nofity table")]),a._v("\n\n    emit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# notify employees")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"frontend_call_for_employee_on_table"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"session"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("to_dict"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        json"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        broadcast"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("True")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("p",[a._v('Por fim o o socketio do backend dispara 2 eventos "frontend_employee_called" e "frontend_call_for_employee_on_table"\no primeiro avisa a mesa que um funcionário foi chamado e o segundo notifica todos os funcionários que uma mesa está solicitando por atendimento.')]),a._v(" "),e("h2",{attrs:{id:"aplicabilidade"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aplicabilidade"}},[a._v("#")]),a._v(" Aplicabilidade")]),a._v(" "),e("ul",[e("li",[a._v("Utilize o padrão Observer quando mudanças no estado de um objeto podem precisar mudar outros objetos, e o atual conjunto de objetos é desconhecido de antemão ou muda dinamicamente.")]),a._v(" "),e("li",[a._v("O padrão Observer permite que qualquer objeto que implemente a interface do assinante possa se inscrever para notificações de eventos em objetos da publicadora. Você pode adicionar o mecanismo de inscrição em seus botões, permitindo que o cliente coloque seu próprio código através de classes assinantes customizadas.")]),a._v(" "),e("li",[a._v("Utilize o padrão quando alguns objetos em sua aplicação devem observar outros, mas apenas por um tempo limitado ou em casos específicos.")])]),a._v(" "),e("h2",{attrs:{id:"referencias"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#referencias"}},[a._v("#")]),a._v(" Referências")]),a._v(" "),e("ul",[e("li",[a._v("\nREFACTORING.GURU. Strategy. Disponível em: https://refactoring.guru/pt-br/design-patterns/observer . Acesso em: 26 de outubro. 2020.\n")])])])}),[],!1,null,null,null);t.default=o.exports}}]);